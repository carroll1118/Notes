
### 操作系统的功能
##### 1.进程管理
    进程控制、进程同步、进程间通信、调度
##### 2. 存储管理
     内存的分配与回收、存储保护、内存扩充
##### 3.文件管理
     文件存储空间的管理、目录管理、文件系统的安全性
##### 4.设备管理
     缓存管理、设备分配、设备处理
##### 5.用户接口
      命令接口、程序接口、图形接口
### 操作系统的分类
**按照用户界面的使用环境和功能特征：**
批处理系统、分时系统、实时系统
### 操作系统的结构
整体式结构、层次式结构、微内核（客户机/服务器）结构
### 一般指令和特权指令
特权指令：输入输出指令、停机指令等，只有监视程序才能执行特权指令。
一般指令：用户只能执行一般指令，如需执行特权指令，处理器会将控制权移交给监控程序。

### 操作系统的启动
##### 中央处理器（CPU）
处理器由运算器、控制器、一系列的寄存器以及高速缓存构成。
寄存器分为两类：用户可见寄存器、控制和状态寄存器。
##### 系统调用
定义：应用程序主动向操作系统发出服务请求
源头：应用程序请求操作提供服务
处理时间：同步或者异步
响应：等待和持续
##### 异常
定义：非法指令或者其他坏的处理状态（如：内存出错）
源头：应用程序意想不到的行为
处理时间：同步
响应：杀死或者重新执行意想不到的应用程序指令
##### 中断
定义：来自不同的硬件设备的计时器和网络的中断
源头：外设
处理时间：异步
响应：持续，对用户应用程序是透明的

注意：
==只有内核可以执行特权指令。==

##### 在操作系统中管理内存的不同方法
1. 程序重定位
2. 分段
3. 分页
4. 虚拟内存
5. 按需分页虚拟内存

### 连续内存分配：内存碎片与分区的动态分配
##### (1)内存碎片问题
空闲内存不能被利用
外部碎片：在分配单元间的未使用内存
内部碎片：在分配单元中的未使用内存

##### (2)简单的内存管理方法：
当一个程序准许运行在内存中时，分配一个连续的区间
分配一个连续的内存区间给运行的程序以访问数据

##### (3)分区的动态分配策略
**首次适配**
内容：现在想分配n字节，从低地址开始找，碰到的第一个空间比n大的空闲块就使用它。

**要想实现首次分配，需要满足以下条件：**
需要存在一个按地址排序的空闲块列表
分配需要找一个合适的分区
重分配需要检查，看看自由分区能不能与相邻的空闲分区合并(形成更大的空闲块)，若有

**优点**
简单
易于产生更大的空闲块，向着地址空间的结尾

**缺点**
外部碎片的问题会加剧
不确定性

**最佳适配**
内容：为了分配n字节，使用最小的可用空闲块，以致块的尺寸比n大。

目的：避免分割大的空闲块；最小化外部碎片产生的尺寸。
要想实现最佳分配，需要满足以下条件：
按尺寸排列的空闲列表
分配需要寻找一个合适的分区
重分配需要搜索和合并于相邻的空闲分区，若有

**优点**：大部分分配是小尺寸时很有效；简单
**缺点**：外部碎片；重分配慢；易产生很多没用的微小碎片。

**最差适配**
内容：为了分配n字节，使用最大的可用空闲块，以致块的尺寸比n大。

目的：避免太多的微小碎片
要想实现最差分配，需要满足以下条件：
按尺寸排列的空闲列表
分配很快(获得最大的分区)
重分配需要合并于相邻的空闲分区，若有，然后调整空闲块列表
**优点**：假如分配时是中等尺寸效果最好
**缺点**：重分配慢；外部碎片；易于破碎大的空闲块以至大分区不能被分割

### 连续内存分配：压缩式与交换式碎片整理
##### (1)压缩式碎片整理(紧致)
-重制程序以合并孔洞
-要求所有程序是 动态可重置的
-问题：何时重置；开销。
##### (2)交换式碎片整理
-运行程序需要更多的内存
-抢占等待的程序或回收它们的内存(把暂时不用的内容挪到磁盘里)

**你知道的越多，你不知道的越多。
有道无术，术尚可求，有术无道，止于术。
如有其它问题，欢迎大家留言，我们一起讨论，一起学习，一起进步**
